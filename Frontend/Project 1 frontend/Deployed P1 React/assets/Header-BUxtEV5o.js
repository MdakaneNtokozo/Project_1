import{i as e,l as t,m as n,n as r,r as i,s as a,t as o}from"./index-Dy5shDWX.js";var s=n(r());function c(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(`footer`,{children:(0,s.jsxs)(`p`,{children:[`Â© VacayPay `,new Date().getFullYear()]})})})}var l=c,u=n(t());function d(){let e=(0,u.useRef)(null),t=(0,u.useRef)(null),n=(0,u.useRef)(null),r=(0,u.useRef)(null),i=(0,u.useRef)(null),[c,l]=(0,u.useState)(``),d=a(),{api:f}=(0,u.useContext)(o);return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(`form`,{className:`form`,onSubmit:e=>{e.preventDefault()},onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(`div`,{children:(0,s.jsx)(`h2`,{children:`Sign up`})}),(0,s.jsxs)(`div`,{children:[(0,s.jsx)(`label`,{children:`Name`}),(0,s.jsx)(`input`,{ref:e,placeholder:`name`,type:`text`,required:!0}),(0,s.jsx)(`label`,{children:`Surname`}),(0,s.jsx)(`input`,{ref:t,placeholder:`surname`,type:`text`,required:!0}),(0,s.jsx)(`label`,{children:`Email`}),(0,s.jsx)(`input`,{ref:n,placeholder:`email`,type:`email`,required:!0}),(0,s.jsx)(`label`,{children:`Password`}),(0,s.jsx)(`input`,{ref:r,placeholder:`password`,type:`password`,required:!0}),(0,s.jsx)(`label`,{children:`Confirm password`}),(0,s.jsx)(`input`,{ref:i,placeholder:`confirm password`,type:`password`,required:!0})]}),(0,s.jsxs)(`div`,{children:[c==``?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(`p`,{className:`error-msg`,children:c}),(0,s.jsx)(`button`,{onClick:async()=>{let a=f+`LoginSignup/signUp`;if(e.current.value!=``&&t.current.value!=``&&n.current.value!=``&&r.current.value!=``&&i.current.value!=``)if(r.current.value==i.current.value){let i={userId:0,userName:e.current.value,userSurname:t.current.value,userEmail:n.current.value,userPassword:r.current.value,userCreatedDate:new Date};try{let e=await fetch(a,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify(i)});e.status==201?d(`/`):e.status==400&&l(await e.text())}catch(e){console.error(e)}}else l(`Passwords don't match`)},children:`Sign up`}),(0,s.jsx)(`br`,{})]})]})})}var f=d;function p(){let e=(0,u.useRef)(null),t=(0,u.useRef)(null),[n,r]=(0,u.useState)(``),[i,c]=(0,u.useState)(``),l=a(),{api:d,role:p,token:m,user:h,setRole:g,setToken:_,setUser:v}=(0,u.useContext)(o);return(0,s.jsxs)(s.Fragment,{children:[i==``?(0,s.jsxs)(`form`,{className:`form`,onSubmit:e=>{e.preventDefault()},onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(`div`,{children:(0,s.jsx)(`h2`,{style:{textAlign:`center`},children:`Login`})}),(0,s.jsxs)(`div`,{children:[(0,s.jsx)(`label`,{children:`Email`}),(0,s.jsx)(`input`,{ref:e,placeholder:`email`,type:`email`,required:!0}),(0,s.jsx)(`label`,{children:`Password`}),(0,s.jsx)(`input`,{ref:t,placeholder:`password`,type:`password`,required:!0})]}),(0,s.jsxs)(`div`,{children:[n==``?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(`p`,{className:`error-msg`,children:n}),(0,s.jsx)(`button`,{onClick:async()=>{if(e.current.value!=``&&t.current.value!=``){var n=e.current.value,i=t.current.value,a=d+`LoginSignup/login?email=`+n+`&password=`+i;fetch(a,{method:`GET`,headers:{"Content-Type":`application/json`}}).then(async e=>{if(e.ok){var t=(await e.text()).split(` `);_(t[0]);var n=t[1];a=d+`LoginSignup/getUserById/`+n,fetch(a,{method:`GET`,headers:{Authorization:`Bearer `+t[0],"Content-Type":`application/json`}}).then(async e=>{if(e.ok){var t=await e.json();v(t),l(`/home`)}else (e.status==400||e.status==404)&&r(await e.text())})}else r(await e.text())})}},children:`Login`}),(0,s.jsxs)(`div`,{children:[`Don't have an account? `,(0,s.jsx)(`div`,{onClick:()=>c(`Sign up`),children:`Sign up`})]})]})]}):(0,s.jsx)(s.Fragment,{}),i==`Sign up`?(0,s.jsx)(`div`,{className:`container-popup`,onClick:()=>c(``),children:(0,s.jsx)(f,{})}):(0,s.jsx)(s.Fragment,{})]})}var m=p;function h(){let{user:t,setSelectedDestination:n,setStartDate:r,setEndDate:a,setSelectedSpenderType:c,setSelectedBuddies:l,setSelectedTransportations:d,setSelectedAccommodations:p,setSelectedFoodSpots:h,setSelectedAttractions:g,setTransList:_,setTransTotal:v,setAccommList:y,setAccommTotal:b,setSpotsList:x,setSpotsTotal:S,setAttrsList:C,setAttrsTotal:w,setVacayPlan:T}=(0,u.useContext)(o),[E,D]=(0,u.useState)(``),[O,k]=(0,u.useState)(!1),A=()=>{n(null),r(null),a(null),c(null),l([]),d([]),p([]),h([]),g([]),_([]),v(0),y([]),b(0),x([]),S(0),C([]),w(0),T(null)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(`header`,{children:[(0,s.jsx)(i,{className:`title`,to:`/home`,onClick:()=>A(),children:`VacayPay`}),(0,s.jsxs)(`div`,{className:`nav-bar`,children:[(0,s.jsxs)(`div`,{className:`hamburger-nav`,onClick:()=>k(!O),children:[(0,s.jsx)(`span`,{}),(0,s.jsx)(`span`,{}),(0,s.jsx)(`span`,{})]}),t==null?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)(`nav`,{className:O==1?`open`:``,children:[(0,s.jsx)(e,{to:`/viewVacayPlans`,onClick:()=>A(),children:`View plans`}),(0,s.jsx)(e,{to:`/profile`,onClick:()=>A(),children:`Profile`})]}),t==null?(0,s.jsxs)(`nav`,{className:O==1?`open`:``,children:[(0,s.jsx)(`p`,{onClick:()=>{D(`Sign up`),k(!1)},children:`Sign up`}),(0,s.jsx)(`p`,{onClick:()=>{D(`Login`),k(!1)},children:`Login`})]}):(0,s.jsx)(s.Fragment,{})]})]}),E==`Login`?(0,s.jsx)(`div`,{className:`container-popup`,onClick:()=>D(``),children:(0,s.jsx)(m,{})}):(0,s.jsx)(s.Fragment,{}),E==`Sign up`?(0,s.jsx)(`div`,{className:`container-popup`,onClick:()=>D(``),children:(0,s.jsx)(f,{})}):(0,s.jsx)(s.Fragment,{})]})}var g=h;export{m as n,l as r,g as t};