import{l as e,m as t,n,s as r,t as i}from"./index-Dy5shDWX.js";import{t as a}from"./dist-B3-LkRQH.js";import"./iconBase-BgoDaE5U.js";import{t as o}from"./fa-y09jtI8n.js";var s=t(e()),c=t(a()),l=t(n());function u(){let[e,t]=(0,s.useState)([]),[n,a]=(0,s.useState)([]),[u,d]=(0,s.useState)([]),{api:f,token:p,setSelectedDestination:m,setExchangeRate:h}=(0,s.useContext)(i),g=r();(0,s.useEffect)(()=>{var e=f+`Destinations/getCountries`;fetch(e,{method:`GET`,headers:{Authorization:`Bearer `+p,"Content-Type":`application/json`}}).then(async n=>{n.status==401&&(console.log(`unauthorized`),g(`/`)),t(await n.json()),e=f+`Destinations/getDestinations`,fetch(e,{method:`GET`,headers:{Authorization:`Bearer `+p,"Content-Type":`application/json`}}).then(async e=>{let t=await e.json();a(t),d(t)})})},[]);let _=e=>{var t=e.target.value;if(t!=``){var r=[];n.forEach(e=>{let n=t.toLowerCase();e.destinationName.toLowerCase().match(n)!=null&&r.push(e)}),d(r)}else d(n)},v=e=>{m(e),g(`vacayDetails`)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(`h2`,{children:`Select a destination`}),(0,l.jsxs)(`div`,{className:`search`,children:[(0,l.jsx)(o,{className:`search-icon`}),(0,l.jsx)(`input`,{placeholder:`Search for a destination`,onChange:e=>_(e)})]}),(0,l.jsx)(`div`,{className:`cards-section`,children:n.length==0?(0,l.jsx)(`p`,{children:`no destination`}):u.map((t,n)=>(0,l.jsxs)(`div`,{className:`card-ui`,onClick:()=>v(t),children:[(0,l.jsxs)(`div`,{className:`card-img`,children:[(0,l.jsx)(`img`,{src:t.destinationImage}),(0,l.jsx)(`div`,{className:`card-rating`,children:(0,l.jsx)(c.Rating,{initialValue:t.destinationRating,readonly:!0,allowFraction:!0,size:`20px`})})]}),(0,l.jsx)(`p`,{className:`card-title`,children:t.destinationName}),(0,l.jsx)(`p`,{className:`card-subtitle`,children:e.find(e=>e.countryId==t.countryId).countryName}),(0,l.jsx)(`p`,{children:t.destinationDescription})]},n))})]})}var d=u;export{d as default};