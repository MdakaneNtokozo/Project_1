import{l as e,m as t,n,o as r,s as i,t as a}from"./index-Dy5shDWX.js";import"./Loading-Dkvs0utl.js";import{r as o,t as s}from"./Header-BUxtEV5o.js";var c=t(e()),l=t(n());function u(){let{api:e,token:t,user:n,currency:u,selectedDestination:d,setSelectedDestination:f,setStartDate:p,setEndDate:m,setSelectedSpenderType:h,setSelectedBuddies:g,setSelectedTransportations:_,setSelectedAccommodations:v,setSelectedFoodSpots:y,setSelectedAttractions:b,setTransList:x,setAccommList:S,setSpotsList:C,setAttrsList:w,setVacayPlan:T}=(0,c.useContext)(a),E=i(),D=r().state?.plan,[O]=(0,c.useState)(D.vacayPlan),[k]=(0,c.useState)(D.vacation),[A]=(0,c.useState)(D.destination),[j]=(0,c.useState)(D.buddies),[M]=(0,c.useState)(D.users),[N]=(0,c.useState)(D.selectedTrans),[P]=(0,c.useState)(D.transportations),[F]=(0,c.useState)(D.selectedAccoms),[I]=(0,c.useState)(D.accommodations),[L]=(0,c.useState)(D.selectedSpots),[R]=(0,c.useState)(D.foodSpots),[z]=(0,c.useState)(D.selectedAttrs),[B]=(0,c.useState)(D.attractions),V=e=>{var e=new Date(e);if(e!=null){let t=[`January`,`February`,`March`,`April`,`May`,`June`,`July`,`August`,`September`,`October`,`November`,`December`],n=e.getFullYear(),r=t.at(e.getMonth());return e.getDate()+` `+r+` `+n}},H=()=>{T(D.vacayPlan),f(D.destination),p(D.vacation.vacationStartDate),m(D.vacation.vacationEndDate),h(D.spenderType),g(D.users),_(D.transportations),v(D.accommodations),y(D.foodSpots),b(D.attractions);var e=[];N.forEach(t=>{var n={trans:P.find(e=>e.transportationId==t.transportationId),useType:t.selectedUseType,num:t.numOfTimes};e.push(n)}),x(e);var t=[];F.forEach(e=>{var n={accomm:I.find(t=>t.accommodationId==e.accommodationId),dates:[new Date(e.checkInDate),new Date(e.checkOutDate)]};t.push(n)}),S(t);var n=[];L.forEach(e=>{var t={spot:R.find(t=>t.foodSpotId==e.foodSpotId),useType:e.selectedExperienceType,num:e.numOfTimes};n.push(t)}),C(n);var r=[];z.forEach(e=>{var t={attr:B.find(t=>t.attractionId==e.attractionId),useType:e.selectedExperienceType,num:e.numOfTimes};r.push(t)}),w(r),E(`/vacayPlan/vacayDetails`)},U=()=>{var n=e+`Destinations/deleteVacayBudget`;fetch(n,{method:`DELETE`,headers:{Authorization:`Bearer `+t,"Content-Type":`application/json`},body:JSON.stringify(D.vacayPlan)}).then(async e=>{e.ok&&(alert(`Vacay plan has been deleted.`),E(`/home`))})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s,{}),(0,l.jsx)(`div`,{className:`container`,children:(0,l.jsx)(`form`,{className:`add-plan-form`,onSubmit:e=>{e.preventDefault()},children:(0,l.jsxs)(`div`,{className:`preview-container`,children:[(0,l.jsxs)(`div`,{className:`preview-upper-section`,children:[(0,l.jsx)(`img`,{src:A.destinationImage}),(0,l.jsxs)(`div`,{children:[(0,l.jsxs)(`p`,{children:[`Vaction details for `,A.destinationName]}),(0,l.jsxs)(`p`,{children:[V(k.vacationStartDate),` - `,V(k.vacationEndDate)]}),(0,l.jsxs)(`p`,{children:[`Created `,V(O.planCreatedDate)]}),(0,l.jsxs)(`p`,{children:[`Planned by: `,n.userName,` `,n.userSurname]})]})]}),(0,l.jsxs)(`div`,{className:`preview-lower-section`,children:[(0,l.jsxs)(`div`,{className:`preview-detail-side`,children:[(0,l.jsx)(`p`,{className:`card-title`,children:`Vacation details`}),(0,l.jsx)(`p`,{className:`card-title`,children:`Travel buddies:`}),j.length==0?(0,l.jsx)(`p`,{children:`No buddies selected`}):(0,l.jsx)(`table`,{children:(0,l.jsx)(`tbody`,{children:j.map((e,t)=>{var n=M.find(t=>t.userId==e.userId);return(0,l.jsxs)(`tr`,{children:[(0,l.jsxs)(`td`,{className:`td1`,children:[n.userName,` `,n.userSurname]}),(0,l.jsx)(`td`,{className:`td1`,children:n.userEmail})]},t)})})}),(0,l.jsx)(`br`,{}),(0,l.jsx)(`p`,{className:`card-title`,children:`Transportation:`}),P.length==0?(0,l.jsx)(`p`,{children:`No transportation selected`}):(0,l.jsx)(`table`,{children:(0,l.jsx)(`tbody`,{children:P.map((e,t)=>{var n=N.find(t=>t.transportationId==e.transportationId);return(0,l.jsxs)(`tr`,{children:[(0,l.jsx)(`td`,{className:`td1`,children:e.transportationName}),(0,l.jsxs)(`td`,{className:`td2`,children:[n.numOfTimes,` `,n.selectedUseType==`1`?`times only`:`times everday`]}),(0,l.jsx)(`td`,{className:`td3`,children:e.transportationPricePerPerson})]},t)})})}),(0,l.jsx)(`br`,{}),(0,l.jsx)(`p`,{className:`card-title`,children:`Selected accommodation:`}),I.length==0?(0,l.jsx)(`p`,{children:`No accommodation selected`}):(0,l.jsx)(`table`,{children:(0,l.jsx)(`tbody`,{children:I.map((e,t)=>{var n=F.find(t=>t.accommodationId==e.accommodationId),r=new Date(n.checkInDate),i=new Date(n.checkOutDate);return(0,l.jsxs)(`tr`,{children:[(0,l.jsx)(`td`,{className:`td1`,children:e.accommodationName}),(0,l.jsxs)(`td`,{className:`td2`,children:[V(r),` - `,V(i)]}),(0,l.jsx)(`td`,{className:`td3`,children:e.accommodationPricePerPerson})]},t)})})}),(0,l.jsx)(`br`,{}),(0,l.jsx)(`p`,{className:`card-title`,children:`Selected food spots:`}),R.length==0?(0,l.jsx)(`p`,{children:`No food spots selected`}):(0,l.jsx)(`table`,{children:(0,l.jsx)(`tbody`,{children:R.map((e,t)=>{var n=L.find(t=>t.foodSpotId==e.foodSpotId);return(0,l.jsxs)(`tr`,{children:[(0,l.jsx)(`td`,{className:`td1`,children:e.foodSpotName}),(0,l.jsxs)(`td`,{className:`td2`,children:[n.numOfTimes,` `,n.selectedExperienceType==`1`?` times only`:`times everyday`]}),(0,l.jsxs)(`td`,{className:`td3`,children:[e.foodSpotMinMenuPrice,` - `,e.foodSpotMaxMenuPrice]})]},t)})})}),(0,l.jsx)(`br`,{}),(0,l.jsx)(`p`,{className:`card-title`,children:`Selected attractions:`}),B.length==0?(0,l.jsx)(`p`,{children:`No attractions selected`}):(0,l.jsx)(`table`,{children:(0,l.jsx)(`tbody`,{children:B.map((e,t)=>{var n=z.find(t=>t.attractionId==e.attractionId);return(0,l.jsxs)(`tr`,{children:[(0,l.jsx)(`td`,{className:`td1`,children:e.attractionName}),(0,l.jsxs)(`td`,{className:`td2`,children:[n.numOfTimes,` `,n.selectedExperienceType==`1`?` times only`:`times everyday`]}),(0,l.jsx)(`td`,{className:`td3`,children:e.attractionEntranceFee})]},t)})})}),(0,l.jsx)(`br`,{})]}),(0,l.jsxs)(`div`,{className:`preview-total-side`,children:[(0,l.jsxs)(`div`,{children:[(0,l.jsx)(`p`,{children:`Vacation Total`}),(0,l.jsx)(`table`,{children:(0,l.jsxs)(`tbody`,{children:[(0,l.jsxs)(`tr`,{children:[(0,l.jsx)(`td`,{className:`td1`,children:`Transportation`}),(0,l.jsx)(`td`,{className:`td2`,children:u.currencySymbol}),(0,l.jsx)(`td`,{className:`td3`,children:(e=>{var t=0;return e.forEach(e=>{t+=e.transportationBudget}),t})(N)})]}),(0,l.jsxs)(`tr`,{children:[(0,l.jsx)(`td`,{className:`td1`,children:`Accommodation`}),(0,l.jsx)(`td`,{className:`td2`,children:u.currencySymbol}),(0,l.jsx)(`td`,{className:`td3`,children:(e=>{var t=0;return e.forEach(e=>{t+=e.accommodationBudget}),t})(F)})]}),(0,l.jsxs)(`tr`,{children:[(0,l.jsx)(`td`,{className:`td1`,children:`Food spot`}),(0,l.jsx)(`td`,{className:`td2`,children:u.currencySymbol}),(0,l.jsx)(`td`,{className:`td3`,children:(e=>{var t=0;return e.forEach(e=>{t+=e.foodSpotBudget}),t})(L)})]}),(0,l.jsxs)(`tr`,{children:[(0,l.jsx)(`td`,{className:`td1`,children:`Attraction`}),(0,l.jsx)(`td`,{className:`td2`,children:u.currencySymbol}),(0,l.jsx)(`td`,{className:`td3`,children:(e=>{var t=0;return e.forEach(e=>{t+=e.attractionBudget}),t})(z)})]})]})}),(0,l.jsx)(`hr`,{}),(0,l.jsx)(`table`,{children:(0,l.jsx)(`tbody`,{children:(0,l.jsxs)(`tr`,{children:[(0,l.jsx)(`td`,{className:`td1`,children:`Budget total`}),(0,l.jsx)(`td`,{className:`td2`,children:u.currencySymbol}),(0,l.jsx)(`td`,{className:`td3`,children:O.planBudget})]})})})]}),(0,l.jsxs)(`div`,{style:{display:`flex`,flexDirection:`row`,justifyContent:`space-between`},children:[(0,l.jsx)(`button`,{type:`button`,onClick:()=>H(),children:`Edit`}),(0,l.jsx)(`button`,{type:`button`,onClick:()=>U(),children:`Delete`})]})]})]})]})})}),(0,l.jsx)(o,{})]})}var d=u;export{d as default};