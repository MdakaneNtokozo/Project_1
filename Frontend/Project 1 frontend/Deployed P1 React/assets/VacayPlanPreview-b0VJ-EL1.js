import{l as e,m as t,n,s as r,t as i}from"./index-Dy5shDWX.js";var a=t(e()),o=t(n());function s(){let{api:e,token:t,user:n,currency:s,selectedDestination:c,setSelectedDestination:l,startDate:u,setStartDate:d,endDate:f,setEndDate:p,selectedSpenderType:m,setSelectedSpenderType:h,selectedBuddies:g,setSelectedBuddies:_,selectedTransportation:v,setSelectedTransportations:y,selectedAccommodations:b,setSelectedAccommodations:x,selectedFoodSpots:S,setSelectedFoodSpots:C,selectedAttractions:w,setSelectedAttractions:T,transList:E,setTransList:D,transTotal:O,setTransTotal:k,accommList:A,setAccommList:j,accommTotal:M,setAccommTotal:N,spotsList:P,setSpotsList:F,spotsTotal:I,setSpotsTotal:L,attrsList:R,setAttrsList:z,attrsTotal:B,setAttrsTotal:V,vacayPlan:H,setVacayPlan:U}=(0,a.useContext)(i),W=r(),G=e=>{var e=new Date(e);if(e!=null){let t=[`January`,`February`,`March`,`April`,`May`,`June`,`July`,`August`,`September`,`October`,`November`,`December`],n=e.getFullYear(),r=t.at(e.getMonth());return e.getDate()+` `+r+` `+n}},K=()=>{W(-5)},q=()=>{confirm(`Are you sure you want to cancel this vacay plan?`)&&(l(null),d(null),p(null),h(null),_([]),y([]),x([]),C([]),T([]),D([]),k(0),j([]),N(0),F([]),L(0),z([]),V(0),U(null),alert(`Vacay plan has been cancelled`),W(`/home`))},J=e=>{var e=new Date(e);if(e!=null){let t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();return t+`-`+n+`-`+(r<10?`0`+r:r)}},Y=()=>{if(E.length==0&&A.length==0&&P.length==0&&R.length==0)alert(`Make sure that at least one transportation, accommodation, food spot or attraction is selected.`);else{var r=[];A.forEach(e=>{var t=new Date(e.dates[0]),n=new Date(e.dates[1]),i={accomm:e.accomm,dates:[t,n]};r.push(i)});let o={vacationId:-1,userId:-1,planBudget:-1,planCreatedDate:Date.now,planModifiedDate:Date.now,spenderTypeId:-1};var i={plan:H??o,user:n,type:m,travelBuddies:g,transSelected:E,accommSelected:r,spotsSelected:P,attrSelected:R};if(H==null){var a=e+`Destinations/calVacayBudget?start=`+J(u)+`&end=`+J(f);fetch(a,{method:`POST`,headers:{Authorization:`Bearer `+t,"Content-Type":`application/json`},body:JSON.stringify(i)}).then(async e=>{e.ok&&(l(null),d(null),p(null),h(null),_([]),y([]),x([]),C([]),T([]),D([]),k([]),j([]),N([]),F([]),L([]),z([]),V([]),alert(`Vacay plan has been added.`),W(`/home`))})}else{var a=e+`Destinations/updateVacayBudget?start=`+J(u)+`&end=`+J(f);fetch(a,{method:`PUT`,headers:{Authorization:`Bearer `+t,"Content-Type":`application/json`},body:JSON.stringify(i)}).then(async e=>{e.ok&&(U(null),l(null),d(null),p(null),h(null),_([]),y([]),x([]),C([]),T([]),D([]),k([]),j([]),N([]),F([]),L([]),z([]),V([]),alert(`Vacay plan has been updated.`),W(`/home`))})}}};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(`div`,{className:`preview-container`,children:[(0,o.jsxs)(`div`,{className:`preview-upper-section`,children:[(0,o.jsx)(`img`,{src:c.destinationImage}),(0,o.jsxs)(`div`,{children:[(0,o.jsxs)(`p`,{children:[`Vaction details for `,c.destinationName]}),(0,o.jsxs)(`p`,{children:[G(u),` - `,G(f)]}),(0,o.jsxs)(`p`,{children:[`Planed by: `,n.userName,` `,n.userSurname]})]})]}),(0,o.jsxs)(`div`,{className:`preview-lower-section`,children:[(0,o.jsxs)(`div`,{className:`preview-detail-side`,children:[(0,o.jsx)(`p`,{className:`card-title`,children:`Vacation details`}),(0,o.jsx)(`p`,{className:`card-title`,children:`Travel buddies:`}),g.length==0?(0,o.jsx)(`p`,{children:`No buddies selected`}):(0,o.jsx)(`table`,{children:(0,o.jsx)(`tbody`,{children:g.map((e,t)=>(0,o.jsxs)(`tr`,{children:[(0,o.jsxs)(`td`,{className:`td1`,children:[e.userName,` `,e.userSurname]}),(0,o.jsx)(`td`,{className:`td1`,children:e.userEmail})]},t))})}),(0,o.jsx)(`br`,{}),(0,o.jsx)(`p`,{className:`card-title`,children:`Transportation:`}),v.length==0?(0,o.jsx)(`p`,{children:`No transportation selected`}):(0,o.jsx)(`table`,{children:(0,o.jsx)(`tbody`,{children:v.map((e,t)=>{let n=E.find(t=>t.trans==e);return(0,o.jsxs)(`tr`,{children:[(0,o.jsx)(`td`,{className:`td1`,children:e.transportationName}),(0,o.jsxs)(`td`,{className:`td2`,children:[n.num,` `,n.useType==`1`?`times only`:`times everday`]}),(0,o.jsx)(`td`,{className:`td3`,children:e.transportationPricePerPerson})]},t)})})}),(0,o.jsx)(`br`,{}),(0,o.jsx)(`p`,{className:`card-title`,children:`Selected accommodation:`}),b.length==0?(0,o.jsx)(`p`,{children:`No accommodation selected`}):(0,o.jsx)(`table`,{children:(0,o.jsx)(`tbody`,{children:b.map((e,t)=>{var n=A.find(t=>t.accomm.accommodationId==e.accommodationId);return(0,o.jsxs)(`tr`,{children:[(0,o.jsx)(`td`,{className:`td1`,children:e.accommodationName}),(0,o.jsxs)(`td`,{className:`td2`,children:[G(n.dates[0]),` - `,G(n.dates[1])]}),(0,o.jsxs)(`td`,{className:`td3`,children:[` `,e.accommodationPricePerPerson]})]},t)})})}),(0,o.jsx)(`br`,{}),(0,o.jsx)(`p`,{className:`card-title`,children:`Selected food spots:`}),S.length==0?(0,o.jsx)(`p`,{children:`No food spots selected`}):(0,o.jsx)(`table`,{children:(0,o.jsx)(`tbody`,{children:S.map((e,t)=>{var n=P.find(t=>t.spot.foodSpotId==e.foodSpotId);return(0,o.jsxs)(`tr`,{children:[(0,o.jsx)(`td`,{className:`td1`,children:e.foodSpotName}),(0,o.jsxs)(`td`,{className:`td2`,children:[n.num,` `,n.useType==`1`?` times only`:`times everyday`]}),(0,o.jsxs)(`td`,{className:`td3`,children:[e.foodSpotMinMenuPrice,` - `,e.foodSpotMaxMenuPrice]})]},t)})})}),(0,o.jsx)(`br`,{}),(0,o.jsx)(`p`,{className:`card-title`,children:`Selected attractions:`}),w.length==0?(0,o.jsx)(`p`,{children:`No attractions selected`}):(0,o.jsx)(`table`,{children:(0,o.jsx)(`tbody`,{children:w.map((e,t)=>{var n=R.find(t=>t.attr.attractionId==e.attractionId);return(0,o.jsxs)(`tr`,{children:[(0,o.jsx)(`td`,{className:`td1`,children:e.attractionName}),(0,o.jsxs)(`td`,{className:`td2`,children:[n.num,` `,n.useType==`1`?` times only`:`times everyday`]}),(0,o.jsx)(`td`,{className:`td3`,children:e.attractionEntranceFee})]},t)})})}),(0,o.jsx)(`br`,{}),(0,o.jsxs)(`div`,{style:{display:`flex`,flexDirection:`row`,justifyContent:`space-between`},children:[(0,o.jsx)(`button`,{type:`button`,onClick:()=>q(),children:`Cancel`}),(0,o.jsx)(`button`,{type:`button`,onClick:()=>K(),children:`Edit`})]})]}),(0,o.jsxs)(`div`,{className:`preview-total-side`,children:[(0,o.jsxs)(`div`,{children:[(0,o.jsx)(`p`,{className:`card-title`,children:`Vacation Total`}),(0,o.jsx)(`table`,{children:(0,o.jsxs)(`tbody`,{children:[(0,o.jsxs)(`tr`,{children:[(0,o.jsx)(`td`,{className:`td1`,children:`Transportation`}),(0,o.jsx)(`td`,{className:`td2`,children:s.currencySymbol}),(0,o.jsx)(`td`,{className:`td3`,children:O})]}),(0,o.jsxs)(`tr`,{children:[(0,o.jsx)(`td`,{className:`td1`,children:`Accommodation`}),(0,o.jsx)(`td`,{className:`td2`,children:s.currencySymbol}),(0,o.jsx)(`td`,{className:`td3`,children:M})]}),(0,o.jsxs)(`tr`,{children:[(0,o.jsx)(`td`,{className:`td1`,children:`Food spot`}),(0,o.jsx)(`td`,{className:`td2`,children:s.currencySymbol}),(0,o.jsx)(`td`,{className:`td3`,children:I})]}),(0,o.jsxs)(`tr`,{children:[(0,o.jsx)(`td`,{className:`td1`,children:`Attraction`}),(0,o.jsx)(`td`,{className:`td2`,children:s.currencySymbol}),(0,o.jsx)(`td`,{className:`td3`,children:B})]})]})}),(0,o.jsx)(`hr`,{}),(0,o.jsx)(`table`,{children:(0,o.jsx)(`tbody`,{children:(0,o.jsxs)(`tr`,{children:[(0,o.jsx)(`td`,{className:`td1`,children:`Budget total`}),(0,o.jsx)(`td`,{className:`td2`,children:s.currencySymbol}),(0,o.jsx)(`td`,{className:`td3`,children:O+M+I+B})]})})})]}),(0,o.jsxs)(`div`,{style:{display:`flex`,flexDirection:`row`,justifyContent:`space-between`},children:[(0,o.jsx)(`p`,{children:` `}),(0,o.jsx)(`button`,{type:`button`,onClick:()=>Y(),children:`Save`})]})]})]})]})})}var c=s;export{c as default};